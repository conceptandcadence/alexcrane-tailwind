$("body").on("click",".plp-item:not(.no-variants) .plp-item__button",(function(){"display-variants"===$(this).closest(".plp-item").attr("data-state")?$(this).closest(".plp-item").attr("data-state","default"):($(".plp-item").attr("data-state","default"),$(this).closest(".plp-item").attr("data-state","display-variants"))})),$("body").on("click",".plp-item .variant",(function(t){t.stopPropagation();let e=$(this).data("variant-id"),i=$("span.cart-count"),a=$(this).closest(".plp-item");a.attr("data-state","adding"),CartJS.addItem(e,1,{},{success:function(t,e,l){a.attr("data-state","success"),i.show(),i.html(CartJS.cart.item_count+1),setTimeout((function(){a.attr("data-state","default")}),2e3)},error:function(t,e,i){var l=parseInt(t.status);404!==l&&400!==l||(a.attr("data-state","error"),setTimeout((function(){a.attr("data-state","default")}),1500))}})})),$("body").on("click",".plp-item.no-variants .plp-item__button",(function(t){t.stopPropagation();let e=$(this).closest(".plp-item"),i=$(this).closest(".plp-item").data("default-variant"),a=$("span.cart-count");console.log("CCC",i),e.attr("data-state","adding"),CartJS.addItem(i,1,{},{success:function(t,i,l){e.attr("data-state","success"),a.show(),a.html(CartJS.cart.item_count+1),setTimeout((function(){e.attr("data-state","default")}),2e3)},error:function(t,i,a){var l=parseInt(t.status);404!==l&&400!==l||(e.attr("data-state","error"),setTimeout((function(){e.attr("data-state","default")}),1500))}})}));let $infiniteScrollingContainer,$infiniteScrollingItems,filterableSizes=[];function updateSizes(){document.querySelectorAll(".plp-products .plp-item").forEach((t=>{let e=$(t).data();e=Object.keys(e),e.forEach((t=>{if(t.includes("size")){let e=t.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()));e=t.replace("_","-"),-1===filterableSizes.indexOf(e)&&filterableSizes.push(e)}}))})),console.log(filterableSizes),updateSizeFilters()}function updateSizeFilters(){document.querySelectorAll(".shop-filter-toggle.size").forEach((t=>{let e=t.dataset?.filter,i=!1;filterableSizes.forEach((t=>{`[data-${t}]`===e&&(i=!0)})),i?t.parentElement.classList.remove("disabled"):t.parentElement.classList.add("disabled")}))}function updateDisplayedSizes(t){if(!t)return $(".plp-products .plp-item").removeClass("filtered-out"),void $(".plp-products .shoppable-look").removeClass("filtered-out");window.activeSizeFilter=t,document.querySelectorAll(".plp-products .plp-item").forEach((e=>{let i=$(e).data(),a=`${t}`,l=!1;i=Object.keys(i);let n=a.replace("-","_");i.forEach((t=>{t===n&&(l=!0)})),l?(e.classList.remove("filtered-out"),$(".plp-products .shoppable-look").addClass("filtered-out")):e.classList.add("filtered-out")})),$infiniteScrollingContainer.infiniteScroll("loadNextPage")}function infiniteScrolling(){var t=setInterval((function(){"undefined"!=typeof InfiniteScroll?($infiniteScrollingContainer=$(".plp-products").infiniteScroll({append:!1,history:!1,path:".plp-products__pagination .next a"}),$infiniteScrollingContainer.on("load.infiniteScroll",(function(t,e){for(var i of($infiniteScrollingItems=$(e).find(".plp-item"),console.log("Displayed Before",window.displayedProducts),Object.keys($infiniteScrollingItems)))$infiniteScrollingItems[i]?.dataset?.handle&&!window.displayedProducts.includes($infiniteScrollingItems[i]?.dataset?.handle)?window.displayedProducts.push($infiniteScrollingItems[i]?.dataset?.handle):$infiniteScrollingItems[i]&&$infiniteScrollingItems[i]?.classList&&$infiniteScrollingItems[i]?.classList.add("plp-duplicate");$infiniteScrollingContainer.infiniteScroll("appendItems",$infiniteScrollingItems),updateSizes(),window.activeSizeFilter&&updateDisplayedSizes(window.activeSizeFilter)})),clearInterval(t)):setTimeout((function(){clearInterval(t)}),5e3)}),10)}updateSizes(),$(".active-filter.size").on("click",(function(t){t.preventDefault(),console.log("xxxxx"),$(this).remove(),updateDisplayedSizes()})),$(".shop-filter-toggle.size").on("click",(function(t){t.preventDefault();let e=$(".active-filters"),i=$(this).data("filter");i=i.substring(1,i.length-1);let a=i.replace("data-","");i=a.replace("size-","").toUpperCase();let l=`<a class="active-filter size" data-id="${a}" href="${window.location.href}">Size: ${i}<span class="close">Ã—</span></a>`;$(".active-filters .active-filter.size").remove(),e.append(l),updateDisplayedSizes(a)})),window.displayedProducts=[],$(".plp-products .plp-item").each((function(){$(this).data("handle")&&!window.displayedProducts.includes($(this).data("handle"))&&window.displayedProducts.push($(this).data("handle"))})),infiniteScrolling();
//# sourceMappingURL=plp-products.min.js.map